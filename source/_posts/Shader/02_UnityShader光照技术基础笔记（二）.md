---
title: 02_UnityShader光照技术基础笔记（二）
tags:
  - Unity
  - Shader
  - HLSL
  - Technology
avatar: /T/文章头像.png
cover: /tex/HLSL+Unity.avif
desc: 番茄酱守护者
recommend: false
published: true
date: 2025-02-08 22:28:15
---

---

**本章节学习目标：** 

- 学习掌握色调映射，视差偏移，ShadowMap实时阴影技术

- 学习常见光照模型知识

  

**环境配置：**

- [UnityTA学习计划](http://localhost:4000/2024/12/18/%E5%85%B6%E4%BB%96/UnityTA%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/)
- [UnityShaderASE节点全解](https://blog.maoxiang.site/2024/12/18/Shader/UnityShaderASE%E8%8A%82%E7%82%B9%E5%85%A8%E8%A7%A3/)
- VScode
- Unity2022·····
- UnityShader入门精要 

---

### 一、光照模型知识

#### 1、Phong光照模型和Blinn_Phong光照模型

-  **Phong模型** 使用反射向量计算高光，效果锐利但计算复杂；

-  **Blinn-Phong模型** 使用半角向量计算高光，效率更高且效果更柔和，适合实时渲染。

| **特性**             | **Phong光照模型**                                            | **Blinn-Phong光照模型**                                      |
| :------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **提出时间**         | 1975年（Bui Tuong Phong）                                    | 1977年（Jim Blinn）                                          |
| **高光反射计算方式** | 基于反射向量 R**R** 和视线向量 V**V** 的点积：(R⋅V)n(**R**⋅**V**)*n* | 基于法线向量 N**N** 和半角向量 H**H** 的点积：(N⋅H)n(**N**⋅**H**)*n* |
| **半角向量 H**       | 不使用半角向量                                               | 使用半角向量 H=L+V∥L+V∥**H**=∥**L**+**V**∥**L**+**V**        |
| **反射向量 R**       | 使用反射向量 R=2(N⋅L)N−L**R**=2(**N**⋅**L**)**N**−**L**      | 不使用反射向量                                               |
| **计算复杂度**       | 较高，需要计算反射向量 R**R**                                | 较低，仅需计算半角向量 H**H**                                |
| **高光效果**         | 高光较为锐利，适合模拟非常光滑的表面                         | 高光较为柔和，适合模拟中等光滑的表面                         |
| **性能**             | 计算反射向量 R**R** 的开销较大，性能较低                     | 计算半角向量 H**H** 的开销较小，性能较高                     |
| **适用场景**         | 适用于需要高光锐利的场景，如镜面、金属等                     | 适用于实时渲染和性能要求较高的场景，如游戏、实时图形         |
| **数学公式**         | Ispecular=Ilight⋅kspecular⋅(R⋅V)n*I*specular=*I*light⋅*k*specular⋅(**R**⋅**V**)*n* | Ispecular=Ilight⋅kspecular⋅(N⋅H)n*I*specular=*I*light⋅*k*specular⋅(**N**⋅**H**)*n* |
| **优点**             | 高光效果更锐利，适合模拟高度光滑的表面                       | 计算效率高，高光效果更自然，适合实时渲染                     |
| **缺点**             | 计算反射向量 R**R** 的开销较大，性能较差                     | 高光效果相对较柔和，不适合模拟极端光滑的表面                 |

#### 2、Blinn_Phong光照模型的应用





### 二、Tone-Mapping 色调映射技术

#### 1、什么是色调映射技术？为什么需要色调映射技术？

1. **色调映射技术（Tone Mapping）**： 是为了解决高动态范围（HDR）图像在低动态范围（LDR）显示设备上呈现时，丢失细节或失真问题而引入的关键技术。

2. **需要色调技术的原因：**

   - **动态范围不匹配**

     - **问题**：现实世界的光照范围（HDR）非常大（如太阳光和阴影的亮度差异），而普通显示设备（如显示器、手机屏幕）的动态范围（LDR）有限，无法直接显示HDR图像的全部亮度信息。
     - **解决**：色调映射通过压缩HDR图像的亮度范围，将其适配到LDR设备的显示能力范围内，同时尽量保留细节。

     ------

     **保留细节**

     - **问题**：直接显示HDR图像会导致亮部过曝（丢失高光细节）或暗部欠曝（丢失阴影细节）。
     - **解决**：色调映射通过局部或全局的亮度调整，平衡亮部和暗部的细节，使图像在LDR设备上看起来更自然。

     ------

     **提升视觉效果**

     - **问题**：未经处理的HDR图像在LDR设备上可能显得平淡或失真，缺乏视觉冲击力。
     - **解决**：色调映射可以增强对比度、色彩饱和度和细节表现，使图像更具视觉吸引力。

     ------

     **适应人眼感知**

     - **问题**：人眼对亮度的感知是非线性的，能够同时感知高亮和低亮区域，但显示设备无法直接模拟这种感知特性。
     - **解决**：色调映射技术通过模拟人眼的感知特性，使图像在显示设备上更符合人眼的视觉体验。

     ------

     **应用场景广泛**

     - **计算机图形学**：在渲染HDR场景时，色调映射是最终呈现的关键步骤。
     - **摄影**：将HDR照片转换为适合打印或显示的图像。
     - **影视和游戏**：提升画面质量，增强沉浸感。

#### 2、Tone-Mapping 色调映射技术的应用



### 三、视差偏移技术

视差偏移技术文档（[视差贴图 - LearnOpenGL CN](https://learnopengl-cn.github.io/05 Advanced Lighting/05 Parallax Mapping/#_1)）

视差偏移又叫：视差贴图、视差映射技术。



### 四、ShadowMap实时阴影技术

![image-20250212174846291](/Blog/posts/2025-2/image-20250212174846291.avif)

![image-20250212175003101](/Blog/posts/2025-2/image-20250212175003101.avif)

